data.table包
================
newbiejasper
2017/3/28

data.table包是干什么的
======================

R语言里有data.frame的数据结构。data.table是data.frame的一个扩展，它几乎继承了所有的data.frame特性，我们通常对data.frame作出的操作，对于data.table同样也是有效的。那么data.table存在的价值是什么呢？它是由C语言写的，所以运行速度快，数据存储效率高，像取子集，变量分组，更新变量等操作都要优于data.frame，而且对于大型数据集的支持比较好。所以，如果你还没有学习过data.frame，可以直接越过它直接学习data.table。

实例中学习
==========

**例1** 创建数据集

创建data.frame

``` r
df <- data.frame(x=rnorm(9),y=rep(c('a','b','c'),each=3),z=rnorm(9))
head(df,n=3)
```

    ##            x y          z
    ## 1 -0.9457956 a -0.3556912
    ## 2 -0.8530501 a -0.3413337
    ## 3 -0.6322649 a  0.5684295

创建data.table

``` r
library(data.table)
dt <- data.table(x=rnorm(9),y=rep(c('a','b','c'),each=3),z=rnorm(9))
head(dt,n=3)
```

    ##            x y          z
    ## 1: -1.306633 a -1.8826437
    ## 2:  1.091311 a  1.8263635
    ## 3:  1.199020 a  0.9011495

查看内存下所有的data table的情况

``` r
tables()
```

    ##      NAME NROW NCOL MB COLS  KEY
    ## [1,] dt      9    3  1 x,y,z    
    ## Total: 1MB

**例2** 像data.frame一样进行操作

``` r
dt[2,] #取第二行，所有列
```

    ##           x y        z
    ## 1: 1.091311 a 1.826364

``` r
dt[dt$y=="a",] #取dt表中y列取值为"a"的所有行
```

    ##            x y          z
    ## 1: -1.306633 a -1.8826437
    ## 2:  1.091311 a  1.8263635
    ## 3:  1.199020 a  0.9011495

**例3** 和data.frame的区别

``` r
dt[c(2,3)]  #data.table中索引没有逗号，默认是按行取，这里取出的是第2，3行
```

    ##           x y         z
    ## 1: 1.091311 a 1.8263635
    ## 2: 1.199020 a 0.9011495

``` r
df[c(2,3)]   #data.frame没有逗号默认是按列取得，这里取出了第2，3列
```

    ##   y           z
    ## 1 a -0.35569122
    ## 2 a -0.34133372
    ## 3 a  0.56842954
    ## 4 b -0.48592127
    ## 5 b -0.32634326
    ## 6 b -1.59159161
    ## 7 c  0.04524644
    ## 8 c -0.11820457
    ## 9 c -0.74306524
